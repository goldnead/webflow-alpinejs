(()=>{var n=class{static get(e,s=""){return document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)")?.pop()||s}static set(e,s,o=365,i="/"){let c=new Date(new Date*1+o*864e5);return e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),document.cookie=e+"="+s+"; expires="+c.toUTCString()+"; path=/"}};var r=()=>({scriptTags:{},get prefix(){return(this.$root.dataset.site||"cookies")+"-"},isOpen:!0,types:{},tooltip:null,lockedType:"basic",hasConsent:!1,init(t=null){!t||t.length===0||(this.types=t,this.registerTemplates(),this.hasAlreadyConsented()&&(this.updateModel(),this.loadTags(),this.isOpen=!1))},getCookieTypes(){console.log(this.$el)},close(){this.hasAlreadyConsented()&&(this.isOpen=!1)},open(){this.isOpen=!0},highlight(t){this.open(),this.tooltip=t.detail.type,this.$refs[t.detail.type]&&this.$refs[t.detail.type].classList.add("cc__checkbox--highlight")},removeHighlights(){this.tooltip=null,Object.keys(this.types).forEach(t=>{this.$refs[t].classList.remove("cc__checkbox--highlight")})},clearAll(){this.clear()},toggle(){this.isOpen?this.close():this.open()},updateModel(){Object.keys(this.types).forEach(t=>{this.consentExistsFor(t)?this.types[t]=!0:this.types[t]=!1})},hasAlreadyConsented(){let t=[];return Object.keys(this.types).forEach(e=>{t.push(this.consentExistsFor(e)),this.consentExistsFor(e)&&this.$dispatch("consent",{type:e})}),this.hasConsent=t.includes(!0),t.includes(!0)},consentExistsFor(t){return n.get(this.prefix+t)==="true"},registerTemplates(){let t=document.querySelectorAll('template[data-type="consent"]');t.length!==0&&t.forEach((e,s)=>{this.scriptTags[e.dataset.consentType]=e})},isScript(t){return t.nodeName==="SCRIPT"},isPixel(t){return t.classList.contains("pixel")},loadTags(){Object.keys(this.scriptTags).forEach((t,e)=>{let o=this.scriptTags[t].content.cloneNode(!0).querySelectorAll("script, .pixel");this.consentExistsFor(t)&&Object.keys(o).forEach(i=>{let c=o[i];this.loadScriptOrPixel(c)})})},loadScriptOrPixel(t){this.isScript(t)?this.loadScriptTag(t):this.isPixel(t)&&this.loadPixel(t)},isSelected(t){return this.types[t]===!0},consent(t){n.set(this.prefix+t,!0),this.$dispatch("consent",{type:t})},triggerConsent(t){let e=t.detail.type;!e||(this.consent(e),this.updateModel())},optout(t){t!==this.lockedType&&(this.types[t]=!1,n.set(this.prefix+t,!1),this.$dispatch("unconsent",{type:t}))},loadScriptTag(t){if(t.attributes.length>0){let e=new Promise((s,o)=>{var i;i=document.createElement("script"),i.src=t.src,i.onload=s,i.onerror=o,document.head.appendChild(i)})}else t&&Function(t.text)()},loadPixel(t){t&&document.getElementById("pixel-container").appendChild(t)},consentToSelectedTypes(){Object.keys(this.types).forEach((t,e)=>{this.isSelected(t)?this.consent(t):this.optout(t)}),this.loadTags()},clear(){Object.keys(this.types).forEach((t,e)=>{this.optout(t)}),this.submit()},submit(){this.removeHighlights(),setTimeout(()=>{this.consentToSelectedTypes(),this.$dispatch("notice:info",{message:"Vielen Dank, deine Einstellungen wurden gespeichert."}),this.close()},500)},selectAll(){Object.keys(this.types).forEach(t=>{this.types[t]=!0}),this.submit()}});document.addEventListener("alpine:init",()=>{Alpine.data("cookieconsent",()=>r)});})();
//# sourceMappingURL=CookieConsent.js.map
