(()=>{window.Cookies=class{static get(e,t=""){return document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)")?.pop()||t}static set(e,t,i=365,o="/"){let s=new Date(new Date*1+i*864e5);return e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),document.cookie=e+"="+t+"; expires="+s.toUTCString()+"; path=/"}};var n=window.Cookies;document.addEventListener("alpine:init",()=>{Alpine.data("cookieconsent",()=>({scriptTags:{},get prefix(){return(this.$root.dataset.site||"cookies")+"-"},isOpen:!0,types:{},tooltip:null,lockedType:"basic",hasConsent:!1,init(e=null){!e||e.length===0||(this.types=e,this.registerTemplates(),this.hasAlreadyConsented()&&(this.updateModel(),this.loadTags(),this.isOpen=!1))},getCookieTypes(){console.log(this.$el)},close(){this.hasAlreadyConsented()&&(this.isOpen=!1)},open(){this.isOpen=!0},highlight(e){this.open(),this.tooltip=e.detail.type,this.$refs[e.detail.type]&&this.$refs[e.detail.type].classList.add("cc__checkbox--highlight")},removeHighlights(){this.tooltip=null,Object.keys(this.types).forEach(e=>{this.$refs[e].classList.remove("cc__checkbox--highlight")})},clearAll(){this.clear()},toggle(){this.isOpen?this.close():this.open()},updateModel(){Object.keys(this.types).forEach(e=>{this.consentExistsFor(e)?this.types[e]=!0:this.types[e]=!1})},hasAlreadyConsented(){let e=[];return Object.keys(this.types).forEach(t=>{e.push(this.consentExistsFor(t)),this.consentExistsFor(t)&&this.$dispatch("consent",{type:t})}),this.hasConsent=e.includes(!0),e.includes(!0)},consentExistsFor(e){return n.get(this.prefix+e)==="true"},registerTemplates(){let e=document.querySelectorAll('template[data-type="consent"]');e.length!==0&&e.forEach((t,i)=>{this.scriptTags[t.dataset.consentType]=t})},isScript(e){return e.nodeName==="SCRIPT"},isPixel(e){return e.classList.contains("pixel")},loadTags(){Object.keys(this.scriptTags).forEach((e,t)=>{let o=this.scriptTags[e].content.cloneNode(!0).querySelectorAll("script, .pixel");this.consentExistsFor(e)&&Object.keys(o).forEach(s=>{let c=o[s];this.loadScriptOrPixel(c)})})},loadScriptOrPixel(e){this.isScript(e)?this.loadScriptTag(e):this.isPixel(e)&&this.loadPixel(e)},isSelected(e){return this.types[e]===!0},consent(e){n.set(this.prefix+e,!0),this.$dispatch("consent",{type:e})},triggerConsent(e){let t=e.detail.type;!t||(this.consent(t),this.updateModel())},optout(e){e!==this.lockedType&&(this.types[e]=!1,n.set(this.prefix+e,!1),this.$dispatch("unconsent",{type:e}))},loadScriptTag(e){if(e.attributes.length>0){let t=new Promise((i,o)=>{var s;s=document.createElement("script"),s.src=e.src,s.onload=i,s.onerror=o,document.head.appendChild(s)})}else e&&Function(e.text)()},loadPixel(e){e&&document.getElementById("pixel-container").appendChild(e)},consentToSelectedTypes(){Object.keys(this.types).forEach((e,t)=>{this.isSelected(e)?this.consent(e):this.optout(e)}),this.loadTags()},clear(){Object.keys(this.types).forEach((e,t)=>{this.optout(e)}),this.submit()},submit(){this.removeHighlights(),setTimeout(()=>{this.consentToSelectedTypes(),this.$dispatch("notice:info",{message:"Vielen Dank, deine Einstellungen wurden gespeichert."}),this.close()},500)},selectAll(){Object.keys(this.types).forEach(e=>{this.types[e]=!0}),this.submit()}}))});})();
//# sourceMappingURL=CookieConsent.js.map
