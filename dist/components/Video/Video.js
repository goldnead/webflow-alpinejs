(()=>{document.addEventListener("alpine:init",()=>{Alpine.data("video",()=>({active:!1,url:"",canPlay:!1,requiredConsent:"third_party",showWarning:!1,allowAutoplay:!1,playAfterConsent:!1,init(){this.requiredConsent=this.$root.dataset.consentHandle,this.requiredConsent==="none"&&(this.canPlay=!0),this.url=this.$root.dataset.url},get coverDescription(){return this.$refs.coverDescription.dataset.text.replace("[url]",this.videoLink())},giveConsent(t){t.detail.type===this.requiredConsent&&(this.canPlay=!0,this.showWarning=!1,this.allowAutoplay=!0,this.playAfterConsent&&this.play())},removeConsent(t){if(t.detail.type===this.requiredConsent){this.canPlay=!1,this.allowAutoplay=!1,this.playAfterConsent=!1,this.active=!1;let e=this.$root.querySelector("iframe");e&&e.remove()}},highlightConsent(){this.$dispatch("highlight-consent",{type:this.requiredConsent}),this.playAfterConsent=!0},consent(){this.$dispatch("trigger-consent",{type:this.requiredConsent}),this.playAfterConsent=!0},embedUrl(){let t="?rel=0&showinfo=0&autoplay=1";return this.$root.dataset.embedUrl+t},videoLink(){return this.$root.dataset.url},videoUrl(){return this.$root.dataset.url},get type(){return this.$root.dataset.type},videoId(){if(this.type==="vimeo")return new URL(this.url).pathname.replace("/","");var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,e=this.url.match(t);return e&&e[7].length==11?e[7]:!1},thumbnailUrl(){return`/thumbnail/${this.type}/${this.videoId()}.jpg?url=${this.videoUrl()}`},play(){this.canPlay?(this.allowAutoplay=!0,this.active=!0):this.showWarning=!0}}))});})();
//# sourceMappingURL=Video.js.map
